j<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>JSON Loader</title>
  
  <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.0.js">
    </script>
    
    
    <script>

       

      window.onload = function() {
        var stage = new Kinetic.Stage({
          container: "container",
          width: 1000,
          height: 600
        });

        var layer = new Kinetic.Layer();
        
                var t1 = new Kinetic.Text({
          x: 0,
          y: 0,
          fill: '#ffd',
          strokeWidth: 0,
          fontSize: 18,
          fontFamily: 'Calibri',
          text: '1',
          textFill: 'black',
          padding: 1,
          dragBoundFunc: function(pos) {
            var newY = pos.y < 50 ? 50 : pos.y;
            return {
              x: pos.x,
              y: newY
            };
          }
        });
        
        
                        var t2 = new Kinetic.Text({
          x: 0,
          y: 0,
          fill: '#ffd',
          strokeWidth: 0,
          fontSize: 18,
          fontFamily: 'Calibri',
          text: '2',
          textFill: 'black',
          padding: 1,
          dragBoundFunc: function(pos) {
            var newY = pos.y < 50 ? 50 : pos.y;
            return {
              x: pos.x,
              y: newY
            };
          }
        });
        
        
                        var t3 = new Kinetic.Text({
          x: 0,
          y: 0,
          fill: '#ffd',
          strokeWidth: 0,
          fontSize: 18,
          fontFamily: 'Calibri',
          text: '3',
          textFill: 'black',
          padding: 1,
          dragBoundFunc: function(pos) {
            var newY = pos.y < 50 ? 50 : pos.y;
            return {
              x: pos.x,
              y: newY
            };
          }
        });


        
        
        var line1 = new Kinetic.Line({
                                    points: [200, 200, 300, 300],
                                    strokeWidth: 3,
                                    stroke: "black",
                                    lineCap: "round",
                            draggable: true,
                                    opacity: 0.3
                                  })
            
                    var line2= new Kinetic.Line({
                                    points: [200, 200, 300, 110],
                                    strokeWidth: 3,
                                    stroke: "red",
                                    lineCap: "round",
                            draggable: true,
                                    opacity: 0.3
                                  })
        
                        
                        /////////////buttons//////////////////
        var circle1 =    new Kinetic.Ellipse({
                          x: 0,
                          y: 0,
                          radius: {x:60,y:30},
                          stroke: "#666",
                          fill: "#ffd",
                          strokeWidth: 2
                        })
            
 
            
            
          var circle2 =  new Kinetic.Ellipse({
                          x: 0,
                          y: 0,
                          radius: {x:60,y:30},
                          stroke: "#666",
                          fill: "#ffd",
                          strokeWidth: 2
                        })
              
    

              
              
          var circle3 =  new Kinetic.Ellipse({
                          x: 0,
                          y: 0,
                          radius: {x:60,y:30},
                          stroke: "#666",
                          fill: "#ffd",
                          strokeWidth: 2
                        })
	 
                        /////////////buttons//////////////////
            

        
        t1.attrs.x = circle1.attrs.x - t1.getTextWidth() / 2;
        t1.attrs.y = circle1.attrs.y - t1.getTextHeight() / 2;

        t2.attrs.x = circle2.attrs.x - t2.getTextWidth() / 2;
        t2.attrs.y = circle2.attrs.y - t2.getTextHeight() / 2;


        t3.attrs.x = circle3.attrs.x - t3.getTextWidth() / 2;
        t3.attrs.y = circle3.attrs.y - t3.getTextHeight() / 2;
        
        
        
        var groupCircle1 =  new Kinetic.Group({
          x: 0,
          y: 0,
          draggable: true
        });

        groupCircle1.add(circle1);
        groupCircle1.add(t1);
 
        
        
        
        var groupCircle2 =  new Kinetic.Group({
          x: 0,
          y: 0,
          draggable: true
        });
       
        groupCircle2.add(circle2);
        groupCircle2.add(t2); 
        
        var groupCircle3 =  new Kinetic.Group({
          x: 0,
          y: 0,
          draggable: true
        });
       
        groupCircle3.add(circle3);
        groupCircle3.add(t3);
        
       





        
        
        layer.draw();
        
        layer.add(line1);
        layer.add(line2);

        
        layer.add(groupCircle1);
        layer.add(groupCircle2);
        layer.add(groupCircle3);

              
                       groupCircle1.attrs.x = 200
                        groupCircle1.attrs.y = 200
                          

                       groupCircle2.attrs.x = 300
                        groupCircle2.attrs.y = 100
                          


                       groupCircle3.attrs.x = 300
                        groupCircle3.attrs.y = 300
                          
                          

                     groupCircle1.on("dragmove", function() { 

                                                                    
                       line2.setPoints([groupCircle2.attrs.x, groupCircle2.attrs.y, groupCircle1.attrs.x, groupCircle1.attrs.y]);
                         
                         line1.setPoints([groupCircle3.attrs.x, groupCircle3.attrs.y, groupCircle1.attrs.x, groupCircle1.attrs.y]);  
  
                         
                         
                                           
                       
                       
                    });
        
        
                   groupCircle2.on("dragmove", function() {


                      line2.setPoints([groupCircle2.attrs.x, groupCircle2.attrs.y, groupCircle1.attrs.x, groupCircle1.attrs.y]); 
                     
                     

                                               if(this.attrs.y < 15){
                            layer.remove(this);
                            layer.remove(line2);
                            
                            layer.draw();
                     }

                       
                       
                       
                    });
        
        
                           groupCircle3.on("dragmove", function() { 

                line1.setPoints([groupCircle3.attrs.x, groupCircle3.attrs.y, groupCircle1.attrs.x, groupCircle1.attrs.y]);

                    });
        
        
        
        
        
        
        stage.add(layer);
      };
      

      

    </script>
  </head>
  <body>
        <div id="container"></div>

    <script>

    </script>
  </body>
</html>